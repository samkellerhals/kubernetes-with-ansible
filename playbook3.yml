---
- hosts: web-server
  tasks:
    - name: Generate secret
      shell: date +%s | sha256sum | base64 | head -c 32 ; echo
      register: command_output
      
    - name: Check secret
      debug: 
        msg: "Generated password is {{ command_output.stdout }}"

    - name: Add command_output to dummy host
      add_host:
        name: "command_output_holder"
        paswd: "{{ command_output.stdout }}"
    
    - name:
      debug:
        msg: "Secret password is {{ hostvars['command_output_holder']['paswd'] }}"

- hosts: db-server
  tasks:
    - name: Print secret password
      debug:
        msg: "Secret password generated by web-server is {{ hostvars['command_output_holder']['paswd'] }}"
